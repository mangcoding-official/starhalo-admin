import{o as y,s as f,n as l,h as b,k as w,i as P,r as j,t as C,j as e}from"./index-PJSoALqW.js";import{C as E}from"./config-drawer-DIpi6UgC.js";import{u as M,H as N,S as D}from"./search-DNskT_XA.js";import{M as T}from"./main-DIftAsZN.js";import{P as k}from"./profile-dropdown-zkoeqgxu.js";import{T as R}from"./theme-switch-D16jziMJ.js";import{a as A,c as F,U as Q,b as q,d as z}from"./users-table-B21ypp6J.js";import{a as B}from"./api-client-d_HjdnGb.js";import"./index-CpUZSOZN.js";import"./index-CzxQJnmd.js";import"./index-mV3cxRO_.js";import"./index-FEBST65e.js";import"./index-DgPcTN26.js";import"./index-By7kRSW8.js";import"./index-n3OEIJtS.js";import"./index-B2ibKlVn.js";import"./layout-provider-BCzdurxv.js";import"./dropdown-menu-C13Htoa9.js";import"./command-Ckdq_yr7.js";import"./index-B4y4BuXJ.js";import"./index-CKm0aj0N.js";import"./check-CWRdaoHi.js";import"./separator-FNUfim07.js";import"./index-CnZH9FRD.js";import"./form-CZtHTW_x.js";import"./show-submitted-data-M89gIccy.js";import"./input-jRkzR5wK.js";import"./password-input-CIDL4bmy.js";import"./eye-CZlXJMJC.js";import"./bulk-actions-CV8077sO.js";import"./select-BVNy0vOO.js";import"./chevron-down-DWwXMWh-.js";import"./badge-Wr05xGak.js";import"./alert-DEbfP5uW.js";import"./card-C33P-Zxd.js";import"./toolbar-FoxzrVPf.js";import"./react-icons.esm-1898j_IC.js";import"./popover-oHmeJmNB.js";import"./collapsible-CsTmlTNp.js";import"./format-DMm6umYn.js";import"./index-BT1z5wPO.js";import"./skeleton-Dz89h62O.js";import"./trash-2-CU3mGl9s.js";import"./get-row-serial-lFSYfpsv.js";const H=y({message:f().optional(),data:y({data:b(A),current_page:l().int().nonnegative(),per_page:l().int().positive(),total:l().int().nonnegative(),last_page:l().int().nonnegative().optional(),next_page_url:f().nullable().optional(),prev_page_url:f().nullable().optional()})});async function K({page:s=1,perPage:r=10,sort:o="desc",search:t}={}){const a=await B.get("/api/admin/users",{params:{page:s,per_page:r,sort:o,...t?.trim()?{s:t.trim()}:{}}}),m=H.safeParse(a.data);if(!m.success)throw new Error("Unable to parse users response.");const{data:{data:i,current_page:g,per_page:u,total:n,last_page:d,next_page_url:c,prev_page_url:x},message:p}=m.data;return{users:i.map(F),pagination:{page:g,perPage:u,total:n,lastPage:d,hasNext:!!c,hasPrevious:!!x},rawMessage:p}}const L=["admin","users"];function Y({page:s,perPage:r,sort:o,search:t,enabled:a=!0}){return M({queryKey:[...L,{page:s??1,perPage:r??10,sort:o??"desc",search:t??""}],queryFn:()=>K({page:s,perPage:r,sort:o,search:t}),placeholderData:w,enabled:a,staleTime:1e3*30})}const U=P("/_authenticated/users/");function G(){const s=U.useSearch(),r=U.useNavigate(),o=s.page??1,t=s.pageSize??10,a=s.sort==="asc"?"asc":"desc",m=typeof s.s=="string"&&s.s.trim().length>0?s.s:void 0,{data:i,isLoading:g,isFetching:u,error:n}=Y({page:o,perPage:t,sort:a,search:m});j.useEffect(()=>{n instanceof Error&&C.error(n.message)},[n]);const d=i?.users??[],c=i?.pagination.total??0,x=i?.pagination.lastPage??(t>0?Math.max(1,Math.ceil(c/t)):1),p=j.useMemo(()=>[{id:"createdAt",desc:a!=="asc"}],[a]),v=j.useCallback(h=>{const _=(typeof h=="function"?h(p):h)[0]?.desc===!1?"asc":"desc";r({search:S=>({...S,sort:_==="desc"?void 0:_})})},[r,p]);return e.jsxs(Q,{children:[e.jsxs(N,{fixed:!0,children:[e.jsx(D,{}),e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(R,{}),e.jsx(E,{}),e.jsx(k,{})]})]}),e.jsxs(T,{children:[e.jsx("div",{className:"mb-4 flex flex-wrap items-center justify-between space-y-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"User List"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your users and their roles here."})]})}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-y-0 lg:space-x-12",children:e.jsx(q,{data:d,total:c,pageCount:x,isLoading:g,isFetching:u,sorting:p,onSortingChange:v,search:s,navigate:r})})]}),e.jsx(z,{})]})}const Qe=G;export{Qe as component};
