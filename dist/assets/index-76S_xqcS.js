const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/quill-Dib36WkH.js","assets/index-BPSZ23yK.js","assets/index-CMNEdAC1.css","assets/index-Dgq280gv.js"])))=>i.map(i=>d[i]);
import{c as xe,r as u,j as e,R as re,u as N,B as A,o as R,x as Z,s as o,z,n as I,y as ce,l as ue,d as je,F as ye,i as de,k as Se,C as we,t as T}from"./index-BPSZ23yK.js";import{C as Ce}from"./config-drawer-CJ7gz8yj.js";import{a as _e,u as Re,C as De,H as ve,S as Me}from"./search-BH8cG_Mc.js";import{M as Ie}from"./main-DDuuTw6d.js";import{P as Te}from"./profile-dropdown-ck0BZhfN.js";import{T as Pe}from"./theme-switch-COF_DH2B.js";import{P as Ne}from"./plus-DEzdOU0p.js";import{D as H,u as Fe,a as Ee,g as He,b as ke,c as Ae,e as Ve,f as ze,h as Oe,T as Le,i as Ue,j as k,k as qe,l as ee,m as Be,n as q,o as Ke}from"./toolbar-CBjoaQVP.js";import{S as $e}from"./skeleton-D2l6--hT.js";import{B as Qe}from"./badge-taik_GfK.js";import{g as We}from"./get-row-serial-lFSYfpsv.js";import{D as Ye}from"./react-icons.esm-CfnrlJZh.js";import{D as Ge,f as Je,g as Xe,j as te,O as ae,i as Ze}from"./dropdown-menu-CywYzuBz.js";import{T as et}from"./trash-2-BFlGjZhg.js";import{f as tt}from"./format-DMm6umYn.js";import{i as at,u as B}from"./id-D_VBRjLd.js";import{u as nt,a as ot,F as st,b as K,c as $,d as Q,e as W,f as Y}from"./form-CtqYgiyz.js";import{s as it}from"./show-submitted-data-CQhPAlMe.js";import{D as lt,a as rt,b as ct,c as ut,d as dt,e as mt,f as pt}from"./command-Bn0Ghmfc.js";import{I as ft}from"./input-DuMOtWk2.js";import{S as gt,a as ht,b as bt,c as xt,d as ne}from"./select-UXgEQtMQ.js";import{a as O}from"./api-client-m-KTob-k.js";import"./index-DjD6NQHy.js";import"./index-E6AtwoD-.js";import"./index-l18ud2wc.js";import"./index-D3o07efQ.js";import"./index-CO7e1cEs.js";import"./index-BzljWo5j.js";import"./index-CcqO3QxQ.js";import"./index-_hsB4uYA.js";import"./layout-provider-ClEEKa2B.js";import"./separator-DC7n6DXS.js";import"./index-DkEBYZ69.js";import"./check-DdWDy1wJ.js";import"./popover-MHnAXzd2.js";import"./index-CapyU3Ll.js";import"./index-q5h3T6pY.js";import"./chevron-down-Ew3f4PwD.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],yt=xe("square-pen",jt),me=re.createContext(null);function St({children:a}){const[t,n]=_e(null),[l,r]=u.useState(null);return e.jsx(me.Provider,{value:{open:t,setOpen:n,currentRow:l,setCurrentRow:r},children:a})}const J=()=>{const a=re.useContext(me);if(!a)throw new Error("useInformations has to be used within <InformationsContext>");return a};function wt(){const{setOpen:a}=J(),{t}=N();return e.jsx("div",{className:"flex gap-2",children:e.jsxs(A,{className:"space-x-1",onClick:()=>a("create"),children:[e.jsx("span",{children:t("info.buttons.create","Create")})," ",e.jsx(Ne,{size:18})]})})}const Ct=ce(["draft","published"]),pe=R({id:o(),title:o(),content:o(),status:Ct,createdAt:Z().nullable(),updatedAt:Z().nullable()}),_t=R({id:z([o(),I()]),title:o().nullable().optional(),content:o().nullable().optional(),description:o().nullable().optional(),body:o().nullable().optional(),status:o().nullable().optional(),publish_date:o().nullable().optional(),published_at:o().nullable().optional(),scheduled_at:o().nullable().optional(),created_at:o().nullable().optional(),updated_at:o().nullable().optional()});function oe(a){if(!a)return null;const t=new Date(a);return Number.isNaN(t.getTime())?null:t}function Rt(a){return(a??"").toLowerCase()==="published"?"published":"draft"}function V(a){const t=_t.parse(a),n={id:String(t.id),title:t.title?.trim()||"Untitled",content:t.content??t.description??t.body??"",status:Rt(t.status),createdAt:oe(t.created_at),updatedAt:oe(t.updated_at??t.created_at)};return pe.parse(n)}function Dt({row:a}){const t=pe.parse(a.original),{setOpen:n,setCurrentRow:l}=J(),{t:r}=N();return e.jsxs(Ge,{modal:!1,children:[e.jsx(Je,{asChild:!0,children:e.jsxs(A,{variant:"ghost",className:"data-[state=open]:bg-muted flex h-8 w-8 p-0",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:r("info.rowActions.openMenu","Open menu")})]})}),e.jsxs(Xe,{align:"end",className:"w-[160px]",children:[e.jsxs(te,{onClick:()=>{l(t),n("update")},children:[r("info.rowActions.edit","Edit"),e.jsx(ae,{children:e.jsx(yt,{size:16})})]}),e.jsx(Ze,{}),e.jsxs(te,{onClick:()=>{l(t),n("delete")},children:[r("info.rowActions.delete","Delete"),e.jsx(ae,{children:e.jsx(et,{size:16})})]})]})]})}function vt(a){return[{accessorKey:"id",header:({column:t})=>e.jsx(H,{column:t,title:a("info.columns.number","No")}),cell:({row:t,table:n})=>e.jsx("span",{className:"font-mono text-xs",children:We(n,t.index)}),enableSorting:!1,enableHiding:!1,size:48},{accessorKey:"title",header:({column:t})=>e.jsx(H,{column:t,title:a("info.columns.title","Title")}),cell:({row:t})=>e.jsx("span",{className:"font-medium",children:t.getValue("title")}),enableSorting:!1},{accessorKey:"status",header:({column:t})=>e.jsx(H,{column:t,title:a("info.columns.status","Status")}),cell:({row:t})=>{const n=String(t.getValue("status")),r={draft:"secondary",published:"default"}[n]??"secondary",s=n==="draft"?a("info.status.draft","Draft"):n==="published"?a("info.status.published","Published"):n;return e.jsx(Qe,{variant:r,children:s})}},{accessorKey:"createdAt",header:({column:t})=>e.jsx(H,{column:t,title:a("info.columns.created","Created")}),cell:({row:t})=>{const n=t.original.createdAt;return!(n instanceof Date)||Number.isNaN(n.getTime())?e.jsx("span",{className:"text-muted-foreground",children:"â€”"}):e.jsx("span",{children:tt(n,"dd MMM yyyy HH:mm",{locale:at})})},sortingFn:"datetime"},{id:"actions",cell:({row:t})=>e.jsx(Dt,{row:t})}]}const Mt=[{label:"Draft",labelKey:"info.status.draft",value:"draft"},{label:"Published",labelKey:"info.status.published",value:"published"}],se=ue("/_authenticated/informations/");function It({data:a,total:t,pageCount:n,isLoading:l,isFetching:r,sorting:s,onSortingChange:f}){const{t:c}=N(),[m,y]=u.useState({}),[b,p]=u.useState({}),_=u.useMemo(()=>vt(c),[c]),{globalFilter:i,onGlobalFilterChange:d,columnFilters:F,onColumnFiltersChange:v,pagination:g,onPaginationChange:S,ensurePageInRange:w}=Fe({search:se.useSearch(),navigate:se.useNavigate(),pagination:{defaultPage:1,defaultPageSize:10},globalFilter:{enabled:!0,key:"s",trim:!1},columnFilters:[{columnId:"status",searchKey:"status",type:"array"}]}),h=u.useMemo(()=>a,[a]),x=Ee({data:h,columns:_,state:{sorting:s,columnVisibility:b,rowSelection:m,columnFilters:F,globalFilter:i,pagination:g},enableRowSelection:!0,onRowSelectionChange:y,onSortingChange:f??(()=>{}),onColumnVisibilityChange:p,globalFilterFn:(j,C,U)=>{const he=String(j.getValue("id")).toLowerCase(),be=String(j.getValue("title")).toLowerCase(),X=String(U).toLowerCase();return he.includes(X)||be.includes(X)},getCoreRowModel:ze(),getFilteredRowModel:Ve(),getSortedRowModel:Ae(),getFacetedRowModel:ke(),getFacetedUniqueValues:He(),onPaginationChange:S,onGlobalFilterChange:d,onColumnFiltersChange:v,manualPagination:!0,pageCount:n,autoResetPageIndex:!1});u.useEffect(()=>{!l&&!r&&w(n)},[w,n,r,l]);const M=x.getVisibleLeafColumns(),P=M.length||_.length,E=Math.min(x.getState().pagination?.pageSize??10,10),L=l||r,D=t===0&&!L;return e.jsxs("div",{className:"space-y-4 max-sm:has-[div[role='toolbar']]:mb-16",children:[e.jsx(Oe,{table:x,searchPlaceholder:c("info.table.searchPlaceholder","Filter by title or ID..."),filters:[{columnId:"status",title:c("info.table.filters.status","Status"),options:Mt.map(j=>({value:j.value,label:c(j.labelKey,j.label)}))}]}),e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs(Le,{children:[e.jsx(Ue,{children:x.getHeaderGroups().map(j=>e.jsx(k,{children:j.headers.map(C=>e.jsx(qe,{colSpan:C.colSpan,children:C.isPlaceholder?null:ee(C.column.columnDef.header,C.getContext())},C.id))},j.id))}),e.jsx(Be,{children:L?Array.from({length:E}).map((j,C)=>e.jsx(k,{children:M.map(U=>e.jsx(q,{children:e.jsx($e,{className:"h-4 w-full"})},U.id))},`loading-${C}`)):x.getRowModel().rows?.length?x.getRowModel().rows.map(j=>e.jsx(k,{"data-state":j.getIsSelected()&&"selected",children:j.getVisibleCells().map(C=>e.jsx(q,{children:ee(C.column.columnDef.cell,C.getContext())},C.id))},j.id)):e.jsx(k,{children:e.jsx(q,{colSpan:P,className:"h-24 text-center",children:D?c("info.table.empty.noInfos","No informations found."):c("info.table.empty.noResults","No results.")})})})]})}),e.jsx(Ke,{table:x})]})}const Tt=[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link","image"],["clean"]];function G(a){return a?a.replace(/<script.*?>[\s\S]*?<\/script>/gi,""):""}function Pt(a,t){const n=l=>l.replace(/&nbsp;/gi," ").replace(/\s+/g," ").trim();return n(a)===n(t)}function Nt(a){return a.replace(/<style.*?>[\s\S]*?<\/style>/gi,"").replace(/<script.*?>[\s\S]*?<\/script>/gi,"").replace(/<\/(p|div|br)>/gi," ").replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim()}function Ft({value:a,placeholder:t,disabled:n,className:l,onChange:r,onBlur:s}){const f=u.useRef(null),c=u.useRef(null),m=u.useRef(G(a)),y=u.useRef(null),b=u.useRef(null),p=u.useRef(r),_=u.useRef(s),i=u.useRef(!!n);u.useEffect(()=>{p.current=r},[r]),u.useEffect(()=>{_.current=s},[s]),u.useEffect(()=>{i.current=!!n},[n]);const d=u.useMemo(()=>G(a),[a]),F=u.useMemo(()=>Nt(d),[d]),v=u.useCallback(g=>{if(i.current)return;const S=document.createElement("input");S.type="file",S.accept="image/*",S.onchange=()=>{const w=S.files?.[0];if(!w)return;const h=new FileReader;h.onload=()=>{const x=h.result;if(typeof x!="string")return;const M=g.getSelection(!0),P=M?M.index:g.getLength();g.insertEmbed(P,"image",x,"user"),g.setSelection(P+1)},h.readAsDataURL(w)},S.click()},[]);return u.useEffect(()=>{let g=!1;async function S(){if(!f.current||c.current)return;const{default:w}=await ye(async()=>{const{default:D}=await import("./quill-Dib36WkH.js");return{default:D}},__vite__mapDeps([0,1,2,3]));if(g||!f.current||c.current)return;const h=new w(f.current,{theme:"snow",modules:{toolbar:Tt,clipboard:{matchVisual:!0}},placeholder:t,readOnly:i.current});c.current=h;const x=m.current??"";h.root.innerHTML=x;const M=()=>{if(i.current)return;const D=G(h.root.innerHTML);m.current=D,p.current(D)},P=D=>{D||_.current?.()};h.on("text-change",M);const E=(D,j,C)=>P(D);h.on("selection-change",E),y.current=M,b.current=E,h.getModule("toolbar")?.addHandler("image",()=>v(h))}return S(),()=>{g=!0;const w=c.current;if(!w)return;const h=y.current;h&&w.off("text-change",h);const x=b.current;x&&w.off("selection-change",x),c.current=null,y.current=null,b.current=null}},[v,t]),u.useEffect(()=>{const g=c.current;g&&g.enable(!i.current)},[n]),u.useEffect(()=>{const g=c.current;if(!g){m.current=d;return}if(!Pt(m.current,d)){const S=g.getSelection();g.root.innerHTML=d,m.current=d,S&&g.setSelection(S.index,S.length??0)}},[d]),e.jsxs("div",{className:je("space-y-2",l),children:[e.jsx("div",{id:"wysiwyg",className:"rounded-lg border border-input",children:e.jsx("div",{ref:f})}),d&&F.length===0?e.jsx("input",{className:"hidden",value:"",tabIndex:-1,"aria-hidden":"true",readOnly:!0}):null]})}function Et(a){return a.replace(/<br\s*\/?>/gi,`
`).replace(/&nbsp;/gi," ").replace(/<[^>]*>/g," ").trim().length===0}const Ht=a=>R({title:o().min(3,a("info.form.validation.titleMin","Title must be at least 3 characters")),content:o().refine(t=>!Et(t),a("info.form.validation.contentRequired","Content is required")),status:ce(["draft","published"])});function ie({open:a,onOpenChange:t,currentRow:n,onSubmit:l}){const r=n?"update":"create",{t:s}=N(),f=u.useMemo(()=>Ht(s),[s]),c=u.useMemo(()=>({title:n?.title??"",content:n?.content??"",status:n?.status??"draft"}),[n]),m=nt({resolver:ot(f),defaultValues:c});u.useEffect(()=>{a?m.reset(c):m.reset({title:"",content:"",status:"draft"})},[m,c,a]);const y=async p=>{l?await l(p,n??null):it(p,r==="create"?s("info.toast.create","You have created the following information:"):s("info.toast.update","You have updated the following information:")),t(!1),m.reset()},{isSubmitting:b}=m.formState;return e.jsx(lt,{open:a,onOpenChange:p=>{t(p),p||m.reset()},children:e.jsxs(rt,{className:"gap-2 sm:max-w-lg",children:[e.jsxs(ct,{className:"text-start",children:[e.jsx(ut,{children:r==="create"?s("info.dialog.createTitle","Create Information"):s("info.dialog.updateTitle","Update Information")}),e.jsx(dt,{children:r==="create"?s("info.dialog.createDescription","Add a new announcement to be displayed in the mobile app."):s("info.dialog.updateDescription","Modify the announcement details below.")})]}),e.jsx(st,{...m,children:e.jsxs("form",{id:"information-upsert-form",onSubmit:m.handleSubmit(y),className:"space-y-4",children:[e.jsx(K,{control:m.control,name:"title",render:({field:p})=>e.jsxs($,{children:[e.jsx(Q,{children:s("info.form.fields.title.label","Title")}),e.jsx(W,{children:e.jsx(ft,{placeholder:s("info.form.fields.title.placeholder","Hydration Tips for This Week"),...p})}),e.jsx(Y,{})]})}),e.jsx(K,{control:m.control,name:"content",render:({field:p})=>e.jsxs($,{children:[e.jsx(Q,{children:s("info.form.fields.content.label","Content")}),e.jsx(W,{children:e.jsx(Ft,{value:p.value??"",onChange:p.onChange,onBlur:p.onBlur,placeholder:s("info.form.fields.content.placeholder","Write your announcement here...")})}),e.jsx(Y,{})]})}),e.jsx(K,{control:m.control,name:"status",render:({field:p})=>e.jsxs($,{children:[e.jsx(Q,{children:s("info.form.fields.status.label","Status")}),e.jsxs(gt,{value:p.value,onValueChange:p.onChange,children:[e.jsx(W,{children:e.jsx(ht,{children:e.jsx(bt,{placeholder:s("info.form.fields.status.placeholder","Select status")})})}),e.jsxs(xt,{children:[e.jsx(ne,{value:"draft",children:s("info.status.draft","Draft")}),e.jsx(ne,{value:"published",children:s("info.status.published","Published")})]})]}),e.jsx(Y,{})]})})]})}),e.jsxs(mt,{className:"gap-2",children:[e.jsx(pt,{asChild:!0,children:e.jsx(A,{variant:"outline",disabled:b,children:s("info.dialog.close","Close")})}),e.jsx(A,{type:"submit",form:"information-upsert-form",disabled:b,children:b?r==="create"?s("info.dialog.submitting.create","Creating..."):s("info.dialog.submitting.update","Updating..."):r==="create"?s("info.dialog.submit.create","Create"):s("info.dialog.submit.update","Update")})]})]})})}const fe=R({id:z([o(),I()]),title:o().nullable().optional(),content:o().nullable().optional(),description:o().nullable().optional(),body:o().nullable().optional(),status:o().nullable().optional(),publish_date:o().nullable().optional(),published_at:o().nullable().optional(),scheduled_at:o().nullable().optional(),created_at:o().nullable().optional(),updated_at:o().nullable().optional()}),kt=R({message:o().optional(),data:R({data:de(fe),current_page:I().int().nonnegative(),per_page:I().int().positive(),total:I().int().nonnegative(),last_page:I().int().nonnegative().optional(),next_page_url:o().nullable().optional(),prev_page_url:o().nullable().optional()}).optional()}),At=R({message:o().optional(),data:de(fe).optional()});function Vt({page:a=1,perPage:t=10,sort:n,search:l}){return{page:a,per_page:t,...n?{sort:n}:{},...l&&l.trim().length>0?{s:l.trim()}:{}}}async function zt(a={}){const{page:t=1,perPage:n=10}=a,l=await O.get("/api/admin/informations",{params:Vt(a)}),r=kt.safeParse(l.data);if(r.success&&r.data.data){const{data:{data:f,current_page:c,per_page:m,total:y,last_page:b,next_page_url:p,prev_page_url:_},message:i}=r.data;return{informations:f.map(V),pagination:{page:c,perPage:m,total:y,lastPage:b,hasNext:!!p,hasPrevious:!!_},rawMessage:i}}const s=At.safeParse(l.data);if(s.success&&s.data.data){const f=s.data.data.map(V),c=f.length;return{informations:f,pagination:{page:t,perPage:n,total:c,lastPage:Math.max(1,Math.ceil(c/n)),hasNext:!1,hasPrevious:t>1&&t<=Math.ceil(c/n)},rawMessage:s.data.message}}throw new Error("Unable to parse informations response.")}const ge=["admin","informations"];function Ot({page:a,perPage:t,sort:n,search:l,enabled:r=!0}){return Re({queryKey:[...ge,{page:a??1,perPage:t??10,sort:n??"desc",search:l??""}],queryFn:()=>zt({page:a,perPage:t,sort:n,search:l}),placeholderData:Se,enabled:r,staleTime:1e3*30})}const Lt=R({message:o().optional(),data:R({id:z([o(),I()]),title:o().nullable().optional(),content:o().nullable().optional(),description:o().nullable().optional(),body:o().nullable().optional(),status:o().nullable().optional(),publish_date:o().nullable().optional(),published_at:o().nullable().optional(),scheduled_at:o().nullable().optional(),created_at:o().nullable().optional(),updated_at:o().nullable().optional()}).optional()});function Ut(a){return{title:a.title,content:a.content,status:a.status}}async function qt(a){const t=await O.post("/api/admin/informations",Ut(a)),n=Lt.safeParse(t.data);if(!n.success)throw new Error("Unable to create information.");return{information:n.data.data?V(n.data.data):null,message:n.data.message}}const Bt=R({message:o().optional(),data:R({id:z([o(),I()]),title:o().nullable().optional(),content:o().nullable().optional(),description:o().nullable().optional(),body:o().nullable().optional(),status:o().nullable().optional(),publish_date:o().nullable().optional(),published_at:o().nullable().optional(),scheduled_at:o().nullable().optional(),created_at:o().nullable().optional(),updated_at:o().nullable().optional()}).optional()});function Kt(a){return{title:a.title,content:a.content,status:a.status}}async function $t(a,t){const n=await O.put(`/api/admin/informations/${a}`,Kt(t)),l=Bt.safeParse(n.data);if(!l.success)throw new Error("Unable to update information.");return{information:l.data.data?V(l.data.data):null,message:l.data.message}}const Qt=R({message:o().optional()});async function Wt(a){const t=await O.delete(`/api/admin/informations/${a}`),n=Qt.safeParse(t.data);if(!n.success)throw new Error("Unable to delete information.");return n.data.message}function Yt(){const{open:a,setOpen:t,currentRow:n,setCurrentRow:l}=J(),r=we(),{t:s}=N(),f=u.useCallback(async()=>{await r.invalidateQueries({queryKey:ge})},[r]),c=B({mutationFn:async i=>qt({title:i.title,content:i.content,status:i.status}),onSuccess:async i=>{await f(),T.success(i.message??s("info.api.createSuccess","Information created successfully.")),t(null)},onError:i=>{const d=i instanceof Error?i.message:s("info.api.createError","Failed to create information.");T.error(d)}}),m=B({mutationFn:async({id:i,values:d})=>$t(i,{title:d.title,content:d.content,status:d.status}),onSuccess:async i=>{await f(),T.success(i.message??s("info.api.updateSuccess","Information updated successfully.")),t(null),l(null)},onError:i=>{const d=i instanceof Error?i.message:s("info.api.updateError","Failed to update information.");T.error(d)}}),y=B({mutationFn:async i=>Wt(i),onSuccess:async i=>{await f(),T.success(i??s("info.api.deleteSuccess","Information deleted successfully.")),t(null),l(null)},onError:i=>{const d=i instanceof Error?i.message:s("info.api.deleteError","Failed to delete information.");T.error(d)}}),b=async i=>{await c.mutateAsync(i)},p=async(i,d)=>{d&&await m.mutateAsync({id:d.id,values:i})},_=async()=>{n&&await y.mutateAsync(n.id)};return e.jsxs(e.Fragment,{children:[e.jsx(ie,{open:a==="create",onOpenChange:i=>t(i?"create":null),onSubmit:b},"informations-create"),n&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{open:a==="update",onOpenChange:i=>{i?t("update"):(t(null),l(null))},currentRow:n,onSubmit:i=>p(i,n)},`informations-update-${n.id}`),e.jsx(De,{destructive:!0,open:a==="delete",onOpenChange:i=>{i?t("delete"):(t(null),l(null))},handleConfirm:()=>{_()},className:"max-w-md",title:s("info.dialog.delete.title","Delete information: {title}?").replace("{title}",n.title||n.id),desc:s("info.dialog.delete.desc","You are about to delete the information titled {title}. This action cannot be undone.").replace("{title}",n.title||n.id),confirmText:s("info.dialog.delete.confirm","Delete"),isLoading:y.isPending},`information-delete-${n.id}`)]})]})}const le=ue("/_authenticated/informations/");function Gt(){const a=le.useSearch(),t=le.useNavigate(),{t:n}=N(),l=a.page??1,r=a.pageSize??10,s=a.sort==="asc"?"asc":"desc",f=typeof a.s=="string"&&a.s.trim().length>0?a.s:void 0,{data:c,isLoading:m,isFetching:y,error:b}=Ot({page:l,perPage:r,sort:s,search:f});u.useEffect(()=>{b instanceof Error&&T.error(b.message)},[b]);const p=c?.informations??[],_=c?.pagination.total??0,i=c?.pagination.lastPage??(r>0?Math.max(1,Math.ceil(_/r)):1),d=u.useMemo(()=>[{id:"createdAt",desc:s!=="asc"}],[s]),F=u.useCallback(v=>{const w=(typeof v=="function"?v(d):v)[0]?.desc===!1?"asc":"desc";t({search:h=>({...h,page:void 0,sort:w==="desc"?void 0:w})})},[t,d]);return e.jsxs(St,{children:[e.jsxs(ve,{fixed:!0,children:[e.jsx(Me,{}),e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(Pe,{}),e.jsx(Ce,{}),e.jsx(Te,{})]})]}),e.jsxs(Ie,{children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between space-y-2 gap-x-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:n("info.page.title","Informations")}),e.jsx("p",{className:"text-muted-foreground",children:n("info.page.description","Here's a list of your informations!")})]}),e.jsx(wt,{})]}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-y-0 lg:space-x-12",children:e.jsx(It,{data:p,total:_,pageCount:i,isLoading:m,isFetching:y,sorting:d,onSortingChange:F})})]}),e.jsx(Yt,{})]})}const Ha=Gt;export{Ha as component};
